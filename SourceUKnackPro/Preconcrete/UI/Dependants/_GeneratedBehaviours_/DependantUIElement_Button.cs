//----------------------------------------------------------------------------------------
// <auto-generated> This code was generated from DependantUIElement
// Changes will be lost if the code is regenerated.</auto-generated>
//----------------------------------------------------------------------------------------




#nullable disable

using UKnack.Attributes;
using UKnack.UI;
using UnityEngine;
using UnityEngine.UIElements;

namespace UKnack.Preconcrete.UI.Dependants;

public abstract class DependantUIElement_Button : Dependant
{
    [SerializeField]
    [DisableEditingInPlaymode]
    private string _buttonName;

    protected Button _button { get; private set; }

    protected abstract void LayoutReadyAndElementFound(VisualElement layout);
    protected abstract void LayoutCleanupBeforeDestruction();

    protected override void OnLayoutCreatedAndReady(VisualElement layout)
    {
        _button = layout.Q<Button>(_buttonName);
        ThrowIfNotFoundVisualElement(_buttonName, _button);
        LayoutReadyAndElementFound(layout);
    }

    protected override void OnLayoutGonnaBeDestroyedNow() =>
        LayoutCleanupBeforeDestruction();

    protected static void ThrowIfNotFoundVisualElement(string id, VisualElement ve)
    {
        if (ve == null)
            throw new System.ArgumentNullException($"button with id: {id} not found in UIDocument");
    }
}


